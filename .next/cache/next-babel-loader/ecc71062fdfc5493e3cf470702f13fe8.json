{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ASTRO\\\\pages\\\\account\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useAuth } from \"@/firebase/context\";\nimport styles from \"./account.module.scss\";\nimport AccountSidebar from \"@/components/AccountSidebar\";\nimport Layout from \"@/components/Layout\";\nimport Input from \"@/components/Input\";\nimport Button from \"@/components/Button\";\nimport { updateUser, updatePassword } from \"@/firebase/update-user\";\nimport { useRouter } from \"next/router\";\nvar schema = yup.object().shape({\n  name: yup.string().required(\"* Name is required.\").min(2, \"* Name is too short\"),\n  surname: yup.string().required(\"* Surname is required.\").min(2, \"* Surname is too short\"),\n  email: yup.string().email().required(\"* Email is required.\"),\n  phone: yup.string().notRequired().matches(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s\\./0-9]*$/g, {\n    message: \"Invalid Phone Number\",\n    excludeEmptyString: true\n  })\n});\nvar schema2 = yup.object().shape({\n  currentPassword: yup.string().required(\"* Current Password is required.\").min(8, \"* Password is too short - should be 8 chars minimum.\"),\n  newPassword: yup.string().required(\"* New Password is required.\").min(8, \"* Password is too short - should be 8 chars minimum.\"),\n  confirmPassword: yup.string().oneOf([yup.ref(\"newPassword\"), null], \"Passwords must match\")\n});\nexport default function AccountPage() {\n  _s();\n\n  var _useState = useState(null),\n      passwordError = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(null),\n      photo = _useState2[0],\n      setPhoto = _useState2[1];\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user,\n      loading = _useAuth.loading;\n\n  var _useForm = useForm({\n    resolver: yupResolver(schema)\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      watch = _useForm.watch,\n      errors = _useForm.errors;\n\n  var _useForm2 = useForm({\n    resolver: yupResolver(schema2)\n  }),\n      register2 = _useForm2.register,\n      handleSubmit2 = _useForm2.handleSubmit,\n      errors2 = _useForm2.errors,\n      getValues = _useForm2.getValues;\n\n  var onSubmit = function onSubmit(_ref) {\n    var email = _ref.email,\n        phone = _ref.phone,\n        name = _ref.name,\n        surname = _ref.surname;\n    updateUser({\n      email: email,\n      phone: phone,\n      name: name,\n      surname: surname,\n      photo: photo,\n      finalEvent: function finalEvent() {\n        return window.location.reload(false);\n      }\n    });\n  };\n\n  var changePassword = function changePassword(_ref2) {\n    var currentPassword = _ref2.currentPassword,\n        newPassword = _ref2.newPassword;\n\n    var _updatePassword = updatePassword({\n      currentPassword: currentPassword,\n      newPassword: newPassword\n    }),\n        reauth = _updatePassword.reauth,\n        update = _updatePassword.update;\n\n    reauth().then(function () {\n      return update().then(function () {\n        return setError(\"Password Changed!\");\n      })[\"catch\"](function (e) {\n        return setError(e.message);\n      });\n    })[\"catch\"](function (e) {\n      return setError(e.message);\n    });\n  };\n\n  if (!user && !loading) useRouter().push(\"/login\");\n  return __jsx(Layout, {\n    noCategories: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, __jsx(AccountSidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), __jsx(\"main\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"My Account\"), __jsx(\"div\", {\n    className: styles.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.accountContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Account Details\"), __jsx(\"form\", {\n    key: \"account-form\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"Name\"), __jsx(Input, {\n    name: \"name\",\n    defaultValue: user === null || user === void 0 ? void 0 : user.name,\n    noMargin: true,\n    register: register,\n    placeholder: \"Name\",\n    error: errors.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  })), errors.name && __jsx(\"span\", {\n    style: {\n      color: \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, errors.name.message), __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Surname\"), __jsx(Input, {\n    name: \"surname\",\n    defaultValue: user === null || user === void 0 ? void 0 : user.surname,\n    noMargin: true,\n    register: register,\n    placeholder: \"Surname\",\n    error: errors.surname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  })), errors.surname && __jsx(\"span\", {\n    style: {\n      color: \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, errors.surname.message), __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, \"Email\"), __jsx(Input, {\n    name: \"email\",\n    defaultValue: user === null || user === void 0 ? void 0 : user.email,\n    noMargin: true,\n    register: register,\n    placeholder: \"E-mail\",\n    error: errors.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  })), errors.email && __jsx(\"span\", {\n    style: {\n      color: \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, errors.email.message), __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"Phone Number\"), __jsx(Input, {\n    name: \"phone\",\n    defaultValue: user === null || user === void 0 ? void 0 : user.phoneNumber,\n    noMargin: true,\n    register: register,\n    error: errors.phone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  })), errors.phone && __jsx(\"span\", {\n    style: {\n      color: \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, errors.phone.message), __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"Profile Photo\"), __jsx(\"label\", {\n    className: styles.uploadButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    onChange: function onChange(e) {\n      return setPhoto(e.target.files[0]);\n    },\n    accept: \"image/*\",\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }), (photo === null || photo === void 0 ? void 0 : photo.name) || \"Select File\")), __jsx(Button, {\n    type: \"submit\",\n    name: \"update_button\",\n    value: \"Update\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, \"Update\"))), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: styles.passwordContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, \"Change Password\"), __jsx(\"form\", {\n    key: \"password-form\",\n    onSubmit: handleSubmit2(changePassword),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, \"Current Password\"), __jsx(Input, {\n    name: \"currentPassword\",\n    register: register2,\n    placeholder: \"Current Password\",\n    noMargin: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, \"New Password\"), __jsx(Input, {\n    name: \"newPassword\",\n    register: register2,\n    placeholder: \"New Password\",\n    noMargin: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  })), errors2.newPassword && __jsx(\"span\", {\n    style: {\n      color: \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, errors2.newPassword.message), __jsx(\"div\", {\n    className: styles.inputContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, \"Confirm New Password\"), __jsx(Input, {\n    name: \"confirmPassword\",\n    register: register2,\n    placeholder: \"Confirm New Password\",\n    noMargin: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  })), errors2.confirmPassword && __jsx(\"span\", {\n    style: {\n      color: \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, errors2.confirmPassword.message), passwordError && __jsx(\"span\", {\n    style: {\n      color: passwordError === \"Password Changed!\" ? \"black\" : \"red\",\n      marginTop: 4,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }, passwordError), __jsx(Button, {\n    type: \"submit\",\n    name: \"password_button\",\n    value: \"Change Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  }, \"Confirm\"))))));\n}\n\n_s(AccountPage, \"FLt47lwHkVaAWcl4qrDxMo4rzB4=\", false, function () {\n  return [useAuth, useForm, useForm, useRouter];\n});\n\n_c = AccountPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountPage\");","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ASTRO/pages/account/index.js"],"names":["React","useState","useForm","yupResolver","yup","useAuth","styles","AccountSidebar","Layout","Input","Button","updateUser","updatePassword","useRouter","schema","object","shape","name","string","required","min","surname","email","phone","notRequired","matches","message","excludeEmptyString","schema2","currentPassword","newPassword","confirmPassword","oneOf","ref","AccountPage","passwordError","setError","photo","setPhoto","user","loading","resolver","register","handleSubmit","watch","errors","register2","handleSubmit2","errors2","getValues","onSubmit","finalEvent","window","location","reload","changePassword","reauth","update","then","e","push","container","title","content","accountContainer","inputContainer","color","marginTop","fontSize","phoneNumber","uploadButton","target","files","display","passwordContainer"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useAuth } from \"@/firebase/context\";\n\nimport styles from \"./account.module.scss\";\nimport AccountSidebar from \"@/components/AccountSidebar\";\nimport Layout from \"@/components/Layout\";\nimport Input from \"@/components/Input\";\nimport Button from \"@/components/Button\";\n\nimport { updateUser, updatePassword } from \"@/firebase/update-user\";\nimport { useRouter } from \"next/router\";\n\nconst schema = yup.object().shape({\n  name: yup\n    .string()\n    .required(\"* Name is required.\")\n    .min(2, \"* Name is too short\"),\n  surname: yup\n    .string()\n    .required(\"* Surname is required.\")\n    .min(2, \"* Surname is too short\"),\n  email: yup.string().email().required(\"* Email is required.\"),\n  phone: yup\n    .string()\n    .notRequired()\n    .matches(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s\\./0-9]*$/g, {\n      message: \"Invalid Phone Number\",\n      excludeEmptyString: true,\n    }),\n});\n\nconst schema2 = yup.object().shape({\n  currentPassword: yup\n    .string()\n    .required(\"* Current Password is required.\")\n    .min(8, \"* Password is too short - should be 8 chars minimum.\"),\n  newPassword: yup\n    .string()\n    .required(\"* New Password is required.\")\n    .min(8, \"* Password is too short - should be 8 chars minimum.\"),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref(\"newPassword\"), null], \"Passwords must match\"),\n});\n\nexport default function AccountPage() {\n  const [passwordError, setError] = useState(null);\n  const [photo, setPhoto] = useState(null);\n  const { user, loading } = useAuth();\n\n  const { register, handleSubmit, watch, errors } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  const {\n    register: register2,\n    handleSubmit: handleSubmit2,\n    errors: errors2,\n    getValues,\n  } = useForm({\n    resolver: yupResolver(schema2),\n  });\n\n  const onSubmit = ({ email, phone, name, surname }) => {\n    updateUser({\n      email,\n      phone,\n      name,\n      surname,\n      photo,\n      finalEvent: () => window.location.reload(false),\n    });\n  };\n\n  const changePassword = ({ currentPassword, newPassword }) => {\n    const { reauth, update } = updatePassword({ currentPassword, newPassword });\n\n    reauth()\n      .then(() =>\n        update()\n          .then(() => setError(\"Password Changed!\"))\n          .catch((e) => setError(e.message))\n      )\n      .catch((e) => setError(e.message));\n  };\n\n  if (!user && !loading) useRouter().push(\"/login\");\n  return (\n    <Layout noCategories>\n      <AccountSidebar />\n      <main className={styles.container}>\n        <h1 className={styles.title}>My Account</h1>\n        <div className={styles.content}>\n          <div className={styles.accountContainer}>\n            <h4>Account Details</h4>\n            <form key=\"account-form\" onSubmit={handleSubmit(onSubmit)}>\n              <div className={styles.inputContainer}>\n                <span>Name</span>\n                <Input\n                  name=\"name\"\n                  defaultValue={user?.name}\n                  noMargin\n                  register={register}\n                  placeholder=\"Name\"\n                  error={errors.name}\n                />\n              </div>\n              {errors.name && (\n                <span style={{ color: \"red\", marginTop: 4, fontSize: 14 }}>\n                  {errors.name.message}\n                </span>\n              )}\n              <div className={styles.inputContainer}>\n                <span>Surname</span>\n                <Input\n                  name=\"surname\"\n                  defaultValue={user?.surname}\n                  noMargin\n                  register={register}\n                  placeholder=\"Surname\"\n                  error={errors.surname}\n                />\n              </div>\n              {errors.surname && (\n                <span style={{ color: \"red\", marginTop: 4, fontSize: 14 }}>\n                  {errors.surname.message}\n                </span>\n              )}\n              <div className={styles.inputContainer}>\n                <span>Email</span>\n                <Input\n                  name=\"email\"\n                  defaultValue={user?.email}\n                  noMargin\n                  register={register}\n                  placeholder=\"E-mail\"\n                  error={errors.email}\n                />\n              </div>\n              {errors.email && (\n                <span style={{ color: \"red\", marginTop: 4, fontSize: 14 }}>\n                  {errors.email.message}\n                </span>\n              )}\n              <div className={styles.inputContainer}>\n                <span>Phone Number</span>\n                <Input\n                  name=\"phone\"\n                  defaultValue={user?.phoneNumber}\n                  noMargin\n                  register={register}\n                  error={errors.phone}\n                />\n              </div>\n              {errors.phone && (\n                <span style={{ color: \"red\", marginTop: 4, fontSize: 14 }}>\n                  {errors.phone.message}\n                </span>\n              )}\n              <div className={styles.inputContainer}>\n                <span>Profile Photo</span>\n\n                <label className={styles.uploadButton}>\n                  <input\n                    type=\"file\"\n                    onChange={(e) => setPhoto(e.target.files[0])}\n                    accept=\"image/*\"\n                    style={{ display: \"none\" }}\n                  />\n                  {photo?.name || \"Select File\"}\n                </label>\n              </div>\n              <Button type=\"submit\" name=\"update_button\" value=\"Update\">\n                Update\n              </Button>\n            </form>\n          </div>\n          <hr />\n          <div className={styles.passwordContainer}>\n            <h4>Change Password</h4>\n            <form key=\"password-form\" onSubmit={handleSubmit2(changePassword)}>\n              <div className={styles.inputContainer}>\n                <span>Current Password</span>\n                <Input\n                  name=\"currentPassword\"\n                  register={register2}\n                  placeholder=\"Current Password\"\n                  noMargin\n                />\n              </div>\n              <div className={styles.inputContainer}>\n                <span>New Password</span>\n                <Input\n                  name=\"newPassword\"\n                  register={register2}\n                  placeholder=\"New Password\"\n                  noMargin\n                />\n              </div>\n              {errors2.newPassword && (\n                <span style={{ color: \"red\", marginTop: 4, fontSize: 14 }}>\n                  {errors2.newPassword.message}\n                </span>\n              )}\n              <div className={styles.inputContainer}>\n                <span>Confirm New Password</span>\n                <Input\n                  name=\"confirmPassword\"\n                  register={register2}\n                  placeholder=\"Confirm New Password\"\n                  noMargin\n                />\n              </div>\n              {errors2.confirmPassword && (\n                <span style={{ color: \"red\", marginTop: 4, fontSize: 14 }}>\n                  {errors2.confirmPassword.message}\n                </span>\n              )}\n              {passwordError && (\n                <span\n                  style={{\n                    color:\n                      passwordError === \"Password Changed!\" ? \"black\" : \"red\",\n                    marginTop: 4,\n                    fontSize: 14,\n                  }}\n                >\n                  {passwordError}\n                </span>\n              )}\n              <Button\n                type=\"submit\"\n                name=\"password_button\"\n                value=\"Change Password\"\n              >\n                Confirm\n              </Button>\n            </form>\n          </div>\n        </div>\n      </main>\n    </Layout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}