{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ASTRO\\\\firebase\\\\context.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport { firebase, auth, db } from \"../config/firebase\";\nconst authContext = /*#__PURE__*/createContext();\nexport function AuthProvider({\n  children\n}) {\n  const auth = useProvideAuth();\n  return __jsx(authContext.Provider, {\n    value: auth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 10\n    }\n  }, children);\n}\nexport const useAuth = () => {\n  console.log(\"useAuth\");\n  return useContext(authContext);\n};\n\nfunction useProvideAuth() {\n  const {\n    0: user,\n    1: setUser\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n\n  const getCurrentUser = () => {\n    var _auth$currentUser;\n\n    ((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.uid) ? db.collection(\"Users\").doc(auth.currentUser.uid).get().then(doc => {\n      setUser(doc.data());\n      setLoading(false);\n    }) : setLoading(false);\n  };\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(() => getCurrentUser());\n    return () => unsubscribe();\n  }, []);\n  return {\n    user,\n    loading,\n    setUser\n  };\n}","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ASTRO/firebase/context.js"],"names":["React","useState","useEffect","useContext","createContext","firebase","auth","db","authContext","AuthProvider","children","useProvideAuth","useAuth","console","log","user","setUser","loading","setLoading","getCurrentUser","currentUser","uid","collection","doc","get","then","data","unsubscribe","onAuthStateChanged"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,EAAiDC,aAAjD,QAAsE,OAAtE;AACA,SAASC,QAAT,EAAmBC,IAAnB,EAAyBC,EAAzB,QAAmC,oBAAnC;AAEA,MAAMC,WAAW,gBAAGJ,aAAa,EAAjC;AACA,OAAO,SAASK,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AACzC,QAAMJ,IAAI,GAAGK,cAAc,EAA3B;AACA,SAAO,MAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEL,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCI,QAApC,CAAP;AACD;AACD,OAAO,MAAME,OAAO,GAAG,MAAM;AAC3BC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,SAAOX,UAAU,CAACK,WAAD,CAAjB;AACD,CAHM;;AAIP,SAASG,cAAT,GAA0B;AACxB,QAAM;AAAA,OAACI,IAAD;AAAA,OAAOC;AAAP,MAAkBf,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM;AAAA,OAACgB,OAAD;AAAA,OAAUC;AAAV,MAAwBjB,QAAQ,CAAC,IAAD,CAAtC;;AAEA,QAAMkB,cAAc,GAAG,MAAM;AAAA;;AAC3B,0BAAAb,IAAI,CAACc,WAAL,wEAAkBC,GAAlB,IACId,EAAE,CACCe,UADH,CACc,OADd,EAEGC,GAFH,CAEOjB,IAAI,CAACc,WAAL,CAAiBC,GAFxB,EAGGG,GAHH,GAIGC,IAJH,CAISF,GAAD,IAAS;AACbP,MAAAA,OAAO,CAACO,GAAG,CAACG,IAAJ,EAAD,CAAP;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAPH,CADJ,GASIA,UAAU,CAAC,KAAD,CATd;AAUD,GAXD;;AAaAhB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMyB,WAAW,GAAGtB,QAAQ,CACzBC,IADiB,GAEjBsB,kBAFiB,CAEE,MAAMT,cAAc,EAFtB,CAApB;AAGA,WAAO,MAAMQ,WAAW,EAAxB;AACD,GALQ,EAKN,EALM,CAAT;AAOA,SAAO;AACLZ,IAAAA,IADK;AAELE,IAAAA,OAFK;AAGLD,IAAAA;AAHK,GAAP;AAKD","sourcesContent":["import React, { useState, useEffect, useContext, createContext } from \"react\";\nimport { firebase, auth, db } from \"../config/firebase\";\n\nconst authContext = createContext();\nexport function AuthProvider({ children }) {\n  const auth = useProvideAuth();\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\nexport const useAuth = () => {\n  console.log(\"useAuth\");\n  return useContext(authContext);\n};\nfunction useProvideAuth() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getCurrentUser = () => {\n    auth.currentUser?.uid\n      ? db\n          .collection(\"Users\")\n          .doc(auth.currentUser.uid)\n          .get()\n          .then((doc) => {\n            setUser(doc.data());\n            setLoading(false);\n          })\n      : setLoading(false);\n  };\n\n  useEffect(() => {\n    const unsubscribe = firebase\n      .auth()\n      .onAuthStateChanged(() => getCurrentUser());\n    return () => unsubscribe();\n  }, []);\n\n  return {\n    user,\n    loading,\n    setUser,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}