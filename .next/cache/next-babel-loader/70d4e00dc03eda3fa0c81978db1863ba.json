{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { db, auth } from \"@/config/firebase\";\nimport { useState, useEffect } from \"react\";\n\nvar useCart = function useCart(id) {\n  _s();\n\n  var _useState = useState([]),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  useEffect(function () {\n    function fetchFromFirestore() {\n      return _fetchFromFirestore.apply(this, arguments);\n    }\n\n    function _fetchFromFirestore() {\n      _fetchFromFirestore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _auth$currentUser;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                auth.currentUser && db.collection(\"Users\").doc((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.uid).onSnapshot(function (doc) {\n                  setData(doc.data().cart);\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchFromFirestore.apply(this, arguments);\n    }\n\n    fetchFromFirestore();\n  }, [auth.currentUser]);\n  return {\n    data: data,\n    loading: loading,\n    error: error\n  };\n};\n\n_s(useCart, \"C4fiAW6C7RZgaKDoEXQgZpbuUZg=\");\n\nvar useCartOnce = function useCartOnce(id) {\n  _s2();\n\n  var _useState4 = useState([]),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(true),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var _useState6 = useState(null),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  console.log(\"once\");\n  useEffect(function () {\n    var _auth$currentUser2;\n\n    function fetchFromFirestore() {\n      return _fetchFromFirestore2.apply(this, arguments);\n    }\n\n    function _fetchFromFirestore2() {\n      _fetchFromFirestore2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _auth$currentUser3;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"once inner\");\n                db.collection(\"Users\").doc((_auth$currentUser3 = auth.currentUser) === null || _auth$currentUser3 === void 0 ? void 0 : _auth$currentUser3.uid).get().then(function (doc) {\n                  setData(doc.data().cart);\n                  setLoading(false);\n                })[\"catch\"](function (e) {\n                  return setError(e);\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _fetchFromFirestore2.apply(this, arguments);\n    }\n\n    ((_auth$currentUser2 = auth.currentUser) === null || _auth$currentUser2 === void 0 ? void 0 : _auth$currentUser2.uid) && fetchFromFirestore();\n  }, [auth.currentUser]);\n  return {\n    data: data,\n    loading: loading,\n    error: error\n  };\n};\n\n_s2(useCartOnce, \"C4fiAW6C7RZgaKDoEXQgZpbuUZg=\");\n\nexport { useCart, useCartOnce };","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ASTRO/hooks/cart.hook.js"],"names":["db","auth","useState","useEffect","useCart","id","data","setData","loading","setLoading","error","setError","fetchFromFirestore","currentUser","collection","doc","uid","onSnapshot","cart","useCartOnce","console","log","get","then","e"],"mappings":";;;;;;AAAA,SAASA,EAAT,EAAaC,IAAb,QAAyB,mBAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,EAAD,EAAQ;AAAA;;AAAA,kBACEH,QAAQ,CAAC,EAAD,CADV;AAAA,MACfI,IADe;AAAA,MACTC,OADS;;AAAA,mBAEQL,QAAQ,CAAC,IAAD,CAFhB;AAAA,MAEfM,OAFe;AAAA,MAENC,UAFM;;AAAA,mBAGIP,QAAQ,CAAC,IAAD,CAHZ;AAAA,MAGfQ,KAHe;AAAA,MAGRC,QAHQ;;AAKtBR,EAAAA,SAAS,CAAC,YAAM;AAAA,aACCS,kBADD;AAAA;AAAA;;AAAA;AAAA,qFACd;AAAA;;AAAA;AAAA;AAAA;AAAA;AACEX,gBAAAA,IAAI,CAACY,WAAL,IACEb,EAAE,CACCc,UADH,CACc,OADd,EAEGC,GAFH,sBAEOd,IAAI,CAACY,WAFZ,sDAEO,kBAAkBG,GAFzB,EAGGC,UAHH,CAGc,UAAUF,GAAV,EAAe;AACzBR,kBAAAA,OAAO,CAACQ,GAAG,CAACT,IAAJ,GAAWY,IAAZ,CAAP;AACD,iBALH,CADF;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADc;AAAA;AAAA;;AAWdN,IAAAA,kBAAkB;AACnB,GAZQ,EAYN,CAACX,IAAI,CAACY,WAAN,CAZM,CAAT;AAcA,SAAO;AACLP,IAAAA,IAAI,EAAJA,IADK;AAELE,IAAAA,OAAO,EAAPA,OAFK;AAGLE,IAAAA,KAAK,EAALA;AAHK,GAAP;AAKD,CAxBD;;GAAMN,O;;AA0BN,IAAMe,WAAW,GAAG,SAAdA,WAAc,CAACd,EAAD,EAAQ;AAAA;;AAAA,mBACFH,QAAQ,CAAC,EAAD,CADN;AAAA,MACnBI,IADmB;AAAA,MACbC,OADa;;AAAA,mBAEIL,QAAQ,CAAC,IAAD,CAFZ;AAAA,MAEnBM,OAFmB;AAAA,MAEVC,UAFU;;AAAA,mBAGAP,QAAQ,CAAC,IAAD,CAHR;AAAA,MAGnBQ,KAHmB;AAAA,MAGZC,QAHY;;AAI1BS,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AAEAlB,EAAAA,SAAS,CAAC,YAAM;AAAA;;AAAA,aACCS,kBADD;AAAA;AAAA;;AAAA;AAAA,sFACd;AAAA;;AAAA;AAAA;AAAA;AAAA;AACEQ,gBAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AAEArB,gBAAAA,EAAE,CAACc,UAAH,CAAc,OAAd,EACGC,GADH,uBACOd,IAAI,CAACY,WADZ,uDACO,mBAAkBG,GADzB,EAEGM,GAFH,GAGGC,IAHH,CAGQ,UAAUR,GAAV,EAAe;AACnBR,kBAAAA,OAAO,CAACQ,GAAG,CAACT,IAAJ,GAAWY,IAAZ,CAAP;AACAT,kBAAAA,UAAU,CAAC,KAAD,CAAV;AACD,iBANH,WAOS,UAACe,CAAD;AAAA,yBAAOb,QAAQ,CAACa,CAAD,CAAf;AAAA,iBAPT;;AAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADc;AAAA;AAAA;;AAad,2BAAAvB,IAAI,CAACY,WAAL,0EAAkBG,GAAlB,KAAyBJ,kBAAkB,EAA3C;AACD,GAdQ,EAcN,CAACX,IAAI,CAACY,WAAN,CAdM,CAAT;AAgBA,SAAO;AACLP,IAAAA,IAAI,EAAJA,IADK;AAELE,IAAAA,OAAO,EAAPA,OAFK;AAGLE,IAAAA,KAAK,EAALA;AAHK,GAAP;AAKD,CA3BD;;IAAMS,W;;AA6BN,SAASf,OAAT,EAAkBe,WAAlB","sourcesContent":["import { db, auth } from \"@/config/firebase\";\nimport { useState, useEffect } from \"react\";\n\nconst useCart = (id) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function fetchFromFirestore() {\n      auth.currentUser &&\n        db\n          .collection(\"Users\")\n          .doc(auth.currentUser?.uid)\n          .onSnapshot(function (doc) {\n            setData(doc.data().cart);\n          });\n    }\n\n    fetchFromFirestore();\n  }, [auth.currentUser]);\n\n  return {\n    data,\n    loading,\n    error,\n  };\n};\n\nconst useCartOnce = (id) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  console.log(\"once\");\n\n  useEffect(() => {\n    async function fetchFromFirestore() {\n      console.log(\"once inner\");\n\n      db.collection(\"Users\")\n        .doc(auth.currentUser?.uid)\n        .get()\n        .then(function (doc) {\n          setData(doc.data().cart);\n          setLoading(false);\n        })\n        .catch((e) => setError(e));\n    }\n    auth.currentUser?.uid && fetchFromFirestore();\n  }, [auth.currentUser]);\n\n  return {\n    data,\n    loading,\n    error,\n  };\n};\n\nexport { useCart, useCartOnce };\n"]},"metadata":{},"sourceType":"module"}